\documentclass[a4paper]{article}

\usepackage{palatino}
\usepackage{mathpazo}
\usepackage{microtype}
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amsthm}

\newtheorem{definition}{Definition}
\newtheorem{example}{Example}

\DeclareMathOperator{\semi}{;}
\begin{document}
\author{Alexander Weigl}
\title{Mini-SymEx -- Weakest-Precondition Engine}
\date{June 19, 2021}
\maketitle



\begin{align*}
  wp( v = e \semi P)
  & = wp(P)[v/e]
  \\
  wp( \mathtt{if}~c~\mathtt{then}~b_1~\mathtt{else}~b_2~\semi P)
  & = (c \rightarrow wp(b_1\semiP))
    \land (\neg c \rightarrow wp(b_2\semiP))
  \\
  wp( \mathtt{choose}~v~\mathtt{:}~e\semi P)
  & = \exists v.~ e \land wp(P)
  \\
  wp( \mathtt{havoc}~v\semi P)
  & = \forall v.~ wp(P)
  \\
  wp( \mathtt{assume}~e\semi P)
  & = e \rightarrow wp(P)
  \\
  wp( \mathtt{assert}~e\semi P)
  & = e \land wp(P)
  \\
  wp( \mathtt{assert}~e\semi P)
  & = e \land (e \rightarrow wp(P))
  \\
  wp(\epsilon) & = true
\end{align*}

\begin{definition}
  A program $P$ is valid w.r.t. to its specification iff $wp(P)$ is
  valid.
\end{definition}

\begin{example}
Let us consider the following program $P_0$:
\begin{verbatim}
int x = 0;
choose x : x > 0;
assert x == 2;
\end{verbatim}

\begin{align*}
  wp(P_0) & = wp(x = 0 \semi(\mathtt{choose}~x~\mathtt:~x >
            0\semi(\mathtt{assert}~x==2\semi\epsilon)))
  \\
  &= wp((\mathtt{choose}~x~\mathtt:~x >
    0\semi(\mathtt{assert}~x==2\semi\epsilon)))[x/0]
  \\
  &= (\exists x.~ x>0 \land wp(\mathtt{assert}~x==2\semi\epsilon))[x/0]
  \\
  &= (\exists x.~ x>0 \land x=2 \wedge wp(\epsilon) )[x/0]
  \\
  &= (\exists x.~ x>0 \land x=2 \wedge true)[x/0]
  \\
  &= (\exists x.~ x>0 \land x=2 \wedge true)
\end{align*}
\end{example}



\end{document}
